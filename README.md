# Tired - å¤šèº«ä»½ä»»åŠ¡ç®¡ç†ç³»ç»Ÿ

ä¸€ä¸ªä¸“ä¸ºç°ä»£æ–œæ é’å¹´è®¾è®¡çš„iOSä»»åŠ¡ç®¡ç†åº”ç”¨ï¼Œæ”¯æŒå¤šèº«ä»½ï¼ˆå­¦ç”Ÿã€å‘˜å·¥ã€ç¤¾å›¢æˆå‘˜ç­‰ï¼‰çš„ä»»åŠ¡ç»Ÿç­¹ä¸æ™ºèƒ½æ’ç¨‹ã€‚

## ğŸ“± æ ¸å¿ƒåŠŸèƒ½

### 1. å¤šèº«ä»½ç®¡ç†
- **ç»„ç»‡ç³»ç»Ÿ**ï¼šå­¦æ ¡ã€ç³»æ‰€ã€å…¬å¸ã€ç¤¾å›¢ã€ä¸“æ¡ˆç­‰å¤šç§ç»„ç»‡ç±»å‹
- **èº«ä»½åˆ‡æ¢**ï¼šåœ¨ä¸åŒèº«ä»½é—´æ— ç¼åˆ‡æ¢ï¼Œèšç„¦å½“å‰è§’è‰²
- **ä»»åŠ¡åˆ†ç±»**ï¼šè‡ªåŠ¨æŒ‰èº«ä»½åˆ†ç±»ä»»åŠ¡ï¼ˆå­¦æ ¡ã€å·¥ä½œã€ç¤¾å›¢ã€ç”Ÿæ´»ï¼‰

### 2. æ™ºèƒ½ä»»åŠ¡ä¸­æ¢
- **ä»Šå¤©è§†å›¾**ï¼šæ˜¾ç¤ºä»Šæ—¥å¾…åŠï¼Œå¿«é€ŸæŸ¥çœ‹å½“å¤©ä»»åŠ¡
- **æœ¬å‘¨è§†å›¾**ï¼šå‘¨å†å±•ç¤ºï¼Œæ¯æ—¥å·¥æ—¶é¢„ä¼°ï¼Œç›´è§‚æŒæ¡ä¸€å‘¨å®‰æ’
- **æœªæ’ç¨‹åˆ—è¡¨**ï¼šBacklogç®¡ç†ï¼Œå¾…æ’ç¨‹ä»»åŠ¡ä¸€ç›®äº†ç„¶

### 3. è‡ªåŠ¨æ’ç¨‹ï¼ˆAutoPlanï¼‰
- æ ¹æ®ä»»åŠ¡ä¼˜å…ˆçº§ã€æˆªæ­¢æ—¥æœŸè‡ªåŠ¨åˆ†é…åˆ°æœ¬å‘¨å„å¤©
- è€ƒè™‘æ¯æ—¥æ—¶é—´å®¹é‡ï¼Œé¿å…è¿‡è½½
- å°Šé‡æ‰‹åŠ¨é”å®šçš„ä»»åŠ¡æ—¥æœŸ

### 4. ç¤¾ç¾¤åŠŸèƒ½ï¼ˆè§„åˆ’ä¸­ï¼‰
- ç»„ç»‡åŠ¨æ€å¢™ï¼šæŸ¥çœ‹æ‰€å±ç»„ç»‡çš„å…¬å‘Šå’Œæ´»åŠ¨
- æ´»åŠ¨æŠ¥åï¼šè‡ªåŠ¨ç”Ÿæˆå‚ä¸ä»»åŠ¡
- äº’åŠ¨åŠŸèƒ½ï¼šç‚¹èµã€è¯„è®º

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### å‰ç«¯
- **æ¡†æ¶**ï¼šSwiftUI + Combine
- **æ¶æ„**ï¼šMVVM
- **æœ€ä½ç‰ˆæœ¬**ï¼šiOS 17+

### åç«¯
- **æ•°æ®åº“**ï¼šFirebase Firestore
- **è®¤è¯**ï¼šFirebase Authentication
- **å­˜å‚¨**ï¼šFirebase Storageï¼ˆå¤´åƒã€å›¾ç‰‡ï¼‰

## ğŸ“¦ é¡¹ç›®ç»“æ„

```
TiredApp/
â”œâ”€â”€ Models/              # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ DomainTypes.swift    # æšä¸¾ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ User.swift           # ç”¨æˆ·æ¨¡å‹
â”‚   â”œâ”€â”€ Organization.swift   # ç»„ç»‡å’Œèº«ä»½æ¨¡å‹
â”‚   â”œâ”€â”€ Task.swift          # ä»»åŠ¡æ¨¡å‹ï¼ˆæ ¸å¿ƒï¼‰
â”‚   â”œâ”€â”€ Event.swift         # æ´»åŠ¨æ¨¡å‹
â”‚   â”œâ”€â”€ Post.swift          # è´´æ–‡æ¨¡å‹
â”‚   â””â”€â”€ OrgApp.swift        # ç»„ç»‡å°åº”ç”¨æ¨¡å‹
â”‚
â”œâ”€â”€ Services/           # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”œâ”€â”€ FirebaseManager.swift      # Firebaseåˆå§‹åŒ–
â”‚   â”œâ”€â”€ AuthService.swift          # è®¤è¯æœåŠ¡
â”‚   â”œâ”€â”€ TaskService.swift          # ä»»åŠ¡CRUD
â”‚   â””â”€â”€ OrganizationService.swift  # ç»„ç»‡ç®¡ç†
â”‚
â”œâ”€â”€ ViewModels/         # è§†å›¾æ¨¡å‹
â”‚   â””â”€â”€ TasksViewModel.swift       # ä»»åŠ¡è§†å›¾é€»è¾‘
â”‚
â”œâ”€â”€ Views/              # UIè§†å›¾
â”‚   â”œâ”€â”€ Tasks/
â”‚   â”‚   â”œâ”€â”€ TasksView.swift        # ä»»åŠ¡ä¸»ç•Œé¢
â”‚   â”‚   â””â”€â”€ TaskRow.swift          # ä»»åŠ¡å¡ç‰‡
â”‚   â”œâ”€â”€ MainTabView.swift          # ä¸»æ ‡ç­¾æ 
â”‚   â””â”€â”€ LoginView.swift            # ç™»å½•ç•Œé¢
â”‚
â”œâ”€â”€ Utils/              # å·¥å…·ç±»
â”‚   â”œâ”€â”€ AutoPlanService.swift      # è‡ªåŠ¨æ’ç¨‹ç®—æ³•
â”‚   â”œâ”€â”€ DateExtensions.swift       # æ—¥æœŸæ‰©å±•
â”‚   â””â”€â”€ ColorExtensions.swift      # é¢œè‰²æ‰©å±•
â”‚
â””â”€â”€ TiredApp.swift      # åº”ç”¨å…¥å£
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- macOS 14.0+
- Xcode 15.0+
- CocoaPods æˆ– Swift Package Manager
- Firebase é¡¹ç›®ï¼ˆè§ä¸‹æ–¹é…ç½®ï¼‰

### 1. å…‹éš†é¡¹ç›®

```bash
git clone <your-repo-url>
cd tired
```

### 2. Firebase é…ç½®

1. å‰å¾€ [Firebase Console](https://console.firebase.google.com/)
2. åˆ›å»ºæ–°é¡¹ç›®æˆ–ä½¿ç”¨ç°æœ‰é¡¹ç›®
3. æ·»åŠ  iOS åº”ç”¨
   - Bundle ID: `com.yourteam.tired`ï¼ˆå¯è‡ªå®šä¹‰ï¼‰
4. ä¸‹è½½ `GoogleService-Info.plist`
5. å°†æ–‡ä»¶æ”¾åˆ° `TiredApp/` ç›®å½•ä¸‹

### 3. åœ¨ Xcode ä¸­æ‰“å¼€é¡¹ç›®

ç”±äºè¿™æ˜¯åœ¨ Linux ç¯å¢ƒåˆ›å»ºçš„é¡¹ç›®ç»“æ„ï¼Œéœ€è¦åœ¨ macOS ä¸Šç”¨ Xcode åˆ›å»ºå®é™…çš„ `.xcodeproj`ï¼š

#### æ–¹å¼ä¸€ï¼šä½¿ç”¨ Swift Package Managerï¼ˆæ¨èï¼‰

1. æ‰“å¼€ Xcode
2. File â†’ New â†’ Project â†’ iOS â†’ App
3. äº§å“åç§°ï¼š`TiredApp`
4. Interfaceï¼šSwiftUI
5. Languageï¼šSwift
6. å°†æœ¬é¡¹ç›®çš„ `TiredApp/` æ–‡ä»¶å¤¹å†…å®¹å¤åˆ¶åˆ°æ–°åˆ›å»ºçš„é¡¹ç›®ä¸­
7. File â†’ Add Package Dependencies
8. æ·»åŠ  Firebase iOS SDKï¼š
   ```
   https://github.com/firebase/firebase-ios-sdk.git
   ```
9. é€‰æ‹©éœ€è¦çš„äº§å“ï¼š
   - FirebaseAuth
   - FirebaseFirestore
   - FirebaseStorage

#### æ–¹å¼äºŒï¼šä½¿ç”¨ CocoaPods

åˆ›å»º `Podfile`ï¼š

```ruby
platform :ios, '17.0'
use_frameworks!

target 'TiredApp' do
  pod 'Firebase/Auth'
  pod 'Firebase/Firestore'
  pod 'Firebase/Storage'
end
```

è¿è¡Œï¼š
```bash
pod install
open TiredApp.xcworkspace
```

### 4. Firestore æ•°æ®åº“é…ç½®

åœ¨ Firebase Console ä¸­ï¼š

1. è¿›å…¥ Firestore Database
2. åˆ›å»ºæ•°æ®åº“ï¼ˆæµ‹è¯•æ¨¡å¼æˆ–ç”Ÿäº§æ¨¡å¼ï¼‰
3. è®¾ç½®å®‰å…¨è§„åˆ™ï¼ˆè§ `docs/FIRESTORE_RULES.md`ï¼‰

### 5. è¿è¡Œåº”ç”¨

1. åœ¨ Xcode ä¸­é€‰æ‹©æ¨¡æ‹Ÿå™¨æˆ–çœŸæœº
2. ç‚¹å‡» Runï¼ˆâŒ˜Rï¼‰

## ğŸ“Š æ•°æ®åº“ Schema

### æ ¸å¿ƒ Collections

#### users
```typescript
{
  id: string              // ç­‰åŒäº Auth UID
  name: string
  email: string
  avatarUrl?: string
  timezone?: string
  weeklyCapacityMinutes?: number
  createdAt: timestamp
  updatedAt: timestamp
}
```

#### organizations
```typescript
{
  id: string
  name: string
  type: 'school' | 'department' | 'club' | 'company' | 'project' | 'other'
  description?: string
  avatarUrl?: string
  coverUrl?: string
  isVerified: boolean
  createdByUserId: string
  createdAt: timestamp
  updatedAt: timestamp
}
```

#### memberships ï¼ˆå¤šèº«ä»½çš„æ ¸å¿ƒï¼‰
```typescript
{
  id: string
  userId: string                    // æŒ‡å‘ users
  organizationId: string            // æŒ‡å‘ organizations
  role: 'owner' | 'admin' | 'staff' | 'student' | 'member'
  title?: string                    // "å¤§äºŒèµ„ç®¡ç³»"ã€"æ™šç­å·¥è¯»ç”Ÿ"
  isPrimaryForType?: boolean
  createdAt: timestamp
  updatedAt: timestamp
}
```

#### tasks ï¼ˆæ ¸å¿ƒä»»åŠ¡æ¨¡å‹ï¼‰
```typescript
{
  id: string
  userId: string

  // ä»»åŠ¡æ¥æº
  sourceOrgId?: string              // æ¥è‡ªå“ªä¸ªç»„ç»‡
  sourceAppInstanceId?: string      // æ¥è‡ªå“ªä¸ªå°åº”ç”¨
  sourceType: 'manual' | 'org_task' | 'event_signup'

  // åŸºæœ¬ä¿¡æ¯
  title: string
  description?: string

  // åˆ†ç±»
  category: 'school' | 'work' | 'club' | 'personal'
  priority: 'low' | 'medium' | 'high'

  // æ—¶é—´
  deadlineAt?: timestamp
  estimatedMinutes?: number

  // æ’ç¨‹
  plannedDate?: timestamp           // æ’åˆ°å“ªä¸€å¤©
  isDateLocked: boolean            // æ˜¯å¦é”å®šï¼ˆä¸å…è®¸autoplanæ”¹åŠ¨ï¼‰

  // çŠ¶æ€
  isDone: boolean
  doneAt?: timestamp

  createdAt: timestamp
  updatedAt: timestamp
}
```

å®Œæ•´ Schema è¯·å‚è€ƒ `docs/DATABASE_SCHEMA.md`

## ğŸ¯ ä½¿ç”¨åœºæ™¯ç¤ºä¾‹

### å…¸å‹çš„ä¸€å¤©

**æ—©ä¸Š 8:00 - å­¦ç”Ÿèº«ä»½**
- æ‰“å¼€ App â†’ Today é¡µé¢
- æŸ¥çœ‹ä»Šæ—¥è¯¾è¡¨å’Œä½œä¸š
- æ ‡è®°"æ•°æ®åº“ä½œä¸š"é¢„ä¼°2å°æ—¶

**ä¸‹åˆ 15:00 - ç¤¾å›¢æˆå‘˜**
- åˆ‡æ¢åˆ°"ç¤¾å›¢"èº«ä»½ç­›é€‰
- çœ‹åˆ°å‰ä»–ç¤¾å‘¨äº”æ´»åŠ¨
- ç‚¹å‡»"æŠ¥å" â†’ è‡ªåŠ¨ç”Ÿæˆä»»åŠ¡

**æ™šä¸Š 18:00 - å‘˜å·¥èº«ä»½**
- åˆ‡æ¢åˆ°"å·¥ä½œ"èº«ä»½
- çœ‹åˆ°åº—é•¿æ’çš„æ™šç­ï¼ˆ18:00-22:00ï¼‰
- ä»»åŠ¡å·²é”å®šæ—¥æœŸï¼Œä¸ä¼šè¢«autoplanç§»åŠ¨

**ç¡å‰ 22:30 - æ€»è§ˆ**
- æ‰“å¼€ This Week
- æŸ¥çœ‹æœ¬å‘¨æ¯æ—¥é¢„ä¼°å·¥æ—¶
- ç‚¹å‡»"è‡ªåŠ¨æ’ç¨‹"
- ç³»ç»Ÿå°†"æœŸä¸­è€ƒå¤ä¹ 6å°æ—¶"æ‹†åˆ†åˆ°4å¤©

## ğŸ”® åç»­å¼€å‘è®¡åˆ’

- [ ] ç»„ç»‡å°åº”ç”¨ç³»ç»Ÿï¼ˆTaskBoardã€EventSignupï¼‰
- [ ] å®Œæ•´çš„åŠ¨æ€å¢™åŠŸèƒ½
- [ ] æ´»åŠ¨æŠ¥åä¸ç­¾åˆ°
- [ ] é€šçŸ¥ç³»ç»Ÿ
- [ ] æ—¥å†é›†æˆ
- [ ] æ•°æ®ç»Ÿè®¡ä¸å¯è§†åŒ–
- [ ] iPad é€‚é…
- [ ] macOS ç‰ˆæœ¬ï¼ˆCatalystï¼‰

## ğŸ“ å¼€å‘æ–‡æ¡£

- [æ•°æ®åº“è¯¦ç»†è®¾è®¡](docs/DATABASE_SCHEMA.md)
- [Firestore å®‰å…¨è§„åˆ™](docs/FIRESTORE_RULES.md)
- [API æ–‡æ¡£](docs/API.md)
- [ç»„ä»¶è®¾è®¡è§„èŒƒ](docs/COMPONENTS.md)

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ‘¥ ä½œè€…

å¼€å‘è€…ï¼š[Your Name]

---

**Tired** - è®©å¤šé‡èº«ä»½çš„ä½ ï¼Œä¸å†ç´¯ ğŸ’ª
