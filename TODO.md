# 任务优化与功能完善计划 TODO

## 1. 异步处理与用户反馈改进
- [x] **(已完成)** 修改 EditTaskView 的 saveTask 和 deleteTask 函数，增加异步等待和错误捕获机制 (使用 Toast 显示回馈).
- [x] 修改 AddTaskView 的 createTask 函数，增加一致的异步等待和错误捕获机制.
- [ ] 考虑为全域操作（如自动排程）提供更明显的加载中指示器.

## 2. 核心功能
- [x] **(已完成)** 在 EditTaskView 中加入删除任务的功能.
- [x] **(已完成)** 实现删除任务后的撤销（Undo）功能.

## 3. 离线快取与同步提示
- [ ] 引入本地缓存机制（如 Core Data 或 SwiftData），支持离线查看与编辑任务.
- [ ] 在无网路连接时，提供清晰的离线状态提示.
- [ ] 设计网路恢复后的后台自动同步与冲突解决机制.

## 4. 任务提醒与通知支持
- [ ] 利用 UserNotifications 框架，实现本地任务到期提醒.
- [ ] 在设置介面中，允许用户管理通知权限和预设提醒时间.
- [ ] (可选) 针对有变动的组织任务，发送远端推播通知.

## 5. 子任务与任务依赖关系管理
- [ ] 增强 UI，以更清晰的层级结构展示和管理多层子任务.
- [ ] 在任务视图中，为被依赖项阻塞的任务提供视觉提示.

## 6. UI/UX 优化及无障碍支持
- [ ] 全面审核应用的 UI/UX，确保交互的流畅性与一致性.
- [ ] 增强 VoiceOver 支持，为所有可交互元件提供有意义的标籤.
- [ ] 检查并调整颜色对比度，确保可读性，符合无障碍标准.

## 7. 代码整理及性能优化
- [ ] 进行代码结构优化，清理冗余代码，统一风格.
- [ ] 对关键视图（如 TasksView）进行性能分析和优化，减少卡顿.
- [ ] 审核 Firebase Firestore 的查询，确保其高效且符合索引策略.

---

请确认以便开始逐步落实上述任务。
